<!DOCTYPE html>
<html>

<head>
    <style>
        html {
            font-family: sans-serif;
        }

        body {
            margin: 0 auto;
        }

        .colourName,
        .colourPalette {
            color: rgb(255, 255, 255);
            text-shadow: 0px 0px 10px black;
            font-size: smaller;
        }

        .stripe {
            padding: 2px;
        }
    </style>
</head>

<body>
</body>
<script>
    'use strict'

    const tflColourStandard = {
        "Corporate": {
            "Corporate Blue": [0, 15, 159],
            "Corporate Yellow": [255, 205, 0],
            "Corporate Black": [0, 0, 0],
            "Corporate Grey": [123, 134, 140],
            "Corporate Red": [225, 37, 27],
            "Corporate Green": [0, 121, 52],
            "Corporate White": [255, 255, 255],
            "Corporate Dark Grey": [50, 62, 72]
        },
        "Mode": {
            "Transport for London": [0, 15, 159],
            "London Cable Car (IFS Cloud Cable Car)": [115, 79, 160],
            "London River Services": [0, 160, 223],
            "DLR": [0, 175, 170],
            "London Coaches": [251, 168, 0],
            "London Trams": [118, 188, 33],
            "Elizabeth line": [119, 61, 189],
            "London Dial-a-Ride": [192, 40, 185],
            "London Underground": [0, 15, 159],
            "London Buses": [225, 37, 27],
            "London Overground": [238, 118, 35],
            "Santander Cycles": [239, 56, 36]
        },
        "Safety": {
            "Safety Blue": [0, 92, 185],
            "Corporate Yellow": [255, 205, 0],
            "Corporate Black": [0, 0, 0],
            "Corporate Red": [225, 37, 27],
            "Corporate Green": [0, 121, 52],
            "Corporate White": [255, 255, 255]
        },
        "London Underground": {
            "Bakerloo line": [166, 90, 42],
            "Hammersmith & City line": [236, 155, 173],
            "Piccadilly line": [0, 15, 159],
            "Central line": [225, 37, 27],
            "Jubilee line": [123, 134, 140],
            "Victoria line": [0, 160, 223],
            "Circle line": [255, 205, 0],
            "Metropolitan line": [135, 15, 84],
            "Waterloo & City line": [107, 205, 178],
            "District line": [0, 121, 52],
            "Northern line": [0, 0, 0]
        },
        "Other": {
            "Congestion Charge": [206, 14, 45],
            "Low Emission Zone (green)": [94, 151, 50],
            "Oyster (dark blue)": [0, 15, 159],
            "Oyster (cyan)": [0, 157, 217],
            "Legible London (yellow)": [240, 188, 11],
            "Legible London (blue)": [0, 32, 67]
        }
    }

    // just display all the colours
    var returnHTML = ""

    for (var palette in tflColourStandard) {
        var paletteCols = tflColourStandard[palette]
        for (var col in paletteCols) {
            var rgbArray = paletteCols[col]
            returnHTML += `<div class="stripe" style="background: rgb(${rgbArray[0]}, ${rgbArray[1]}, ${rgbArray[2]})"><span class="colourPalette">${palette}</span> - <span class="colourName">${col}</span></div>`
        }
        document.getElementsByTagName("body")[0].innerHTML = returnHTML
    }

    // but what if they were sorted?
    function replaceHTMLWithSortedVersion() {
        var allColoursSorted = {}
        var allColoursSortedLookup = {}
        var sortedCols
        var sortedHTML

        function leftpad(input_string, pad_string, target_length) {
            var outstring = input_string
            while (outstring.length < target_length) {
                outstring = pad_string + outstring
            }
            return outstring
        }

        for (var palette in tflColourStandard) {
            var paletteCols = tflColourStandard[palette]
            for (var col in paletteCols) {
                var rgbArray = paletteCols[col]
                allColoursSorted[col] = parseInt(rgbArray.map(x => leftpad(x.toString(16), "0", 2)).join(""), 16) // convert to hex string then back to decimal int
            }
        }

        // swap keys and values
        for (var col in allColoursSorted) {
            allColoursSortedLookup[allColoursSorted[col]] = col
        }


        // do sorted HTML
        for (var deccol in allColoursSortedLookup) {
            var hexcol = leftpad(parseInt(deccol).toString(16), "0", 6)
            var colname = allColoursSortedLookup[deccol]
            // console.log(deccol, hexcol, colname)
            sortedHTML += `<div class="stripe" style="background: #${hexcol}"><span class="colourName">${colname}</span></div>`
        }

        document.getElementsByTagName("body")[0].innerHTML = sortedHTML

        return allColoursSorted
    }

    function RGBToHSL(r, g, b) {
        // Make r, g, and b fractions of 1
        r /= 255;
        g /= 255;
        b /= 255;

        // Find greatest and smallest channel values
        let cmin = Math.min(r, g, b),
            cmax = Math.max(r, g, b),
            delta = cmax - cmin,
            h = 0,
            s = 0,
            l = 0;
        // Calculate hue
        // No difference
        if (delta == 0)
            h = 0;
        // Red is max
        else if (cmax == r)
            h = ((g - b) / delta) % 6;
        // Green is max
        else if (cmax == g)
            h = (b - r) / delta + 2;
        // Blue is max
        else
            h = (r - g) / delta + 4;

        h = Math.round(h * 60);

        // Make negative hues positive behind 360Â°
        if (h < 0)
            h += 360;
        // Calculate lightness
        l = (cmax + cmin) / 2;

        // Calculate saturation
        s = delta == 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));

        // Multiply l and s by 100
        s = +(s * 100).toFixed(1);
        l = +(l * 100).toFixed(1);

        return [h, s, l]
    }

    function doThing() {
        var records = []
        for (var palette in tflColourStandard) {
            var paletteCols = tflColourStandard[palette];
            for (var col in paletteCols) {
                var rgbArray = paletteCols[col];
                records.push([palette, col, RGBToHSL(rgbArray[0], rgbArray[1], rgbArray[2]).toString()]);
            }
        }
        return records.join("\n")
    }

</script>

</html>